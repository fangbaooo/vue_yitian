<template>
  <div>
    <ul class="p_safepage" id="scrollPage">
    <li class="section page01 pageon">
      <div class="p_sfmain p_safex1">
            <img src="./img/x1title.png" alt="" class="p_x1title pagetop" ondragstart="return false;" />
            <img src="./img/x1coin1.png" alt="" class="p_x1coin1" ondragstart="return false;" />
            <img src="./img/x1coin1.png" alt="" class="p_x1coin11 " ondragstart="return false;" />
            <img src="./img/x1coin2.png" alt="" class="p_x1coin2" ondragstart="return false;" />
            <img src="./img/x1coin3.png" alt="" class="p_x1coin3 pagecoin1" ondragstart="return false;" />
            <img src="./img/x1coin3.png" alt="" class="p_x1coin31 pagecoin1" ondragstart="return false;" />
            <img src="./img/x1coin3.png" alt="" class="p_x1coin32 pagecoin2" ondragstart="return false;" />
            <img src="./img/x1coin3.png" alt="" class="p_x1coin33 pagecoin3" ondragstart="return false;" />
            <img src="./img/x1coin3.png" alt="" class="p_x1coin34 pagecoin4" ondragstart="return false;" />
            <img src="./img/x1coin3.png" alt="" class="p_x1coin35 pagecoin5" ondragstart="return false;" />
            <img src="./img/x1man.png" alt="" class="p_x1man pageleft" ondragstart="return false;" />
            <img src="./img/x1computer.png" alt="" class="p_x1computer pagebot" ondragstart="return false;" />
            <img src="./img/x1frog.png" alt="" class="p_x1frog pageright" ondragstart="return false;" />
            <img src="./img/x1bubble.png" alt="" class="p_x1bubble pagebot" ondragstart="return false;" />
            <img src="./img/x1word.png" alt="" class="p_x1word pagebot" ondragstart="return false;" />
        </div>
    </li>
    <li class="section page02">
        <div class="p_sfmain p_safex2">
          <img src="./img/x2title.png" alt="" class="p_x2title pagetop" ondragstart="return false;" />
            <img src="./img/x2frog.png" alt="" class="p_x2frog pagebot" ondragstart="return false;" />
            <img src="./img/x2bubble.png" alt="" class="p_x2bubble pageright" ondragstart="return false;" />
            <img src="./img/x2word.png" alt="" class="p_x2word pageright" ondragstart="return false;" />
            <img src="./img/x2round.png" alt="" class="p_x2round pagetop" ondragstart="return false;" />
            <img src="./img/x2cloud1.png" alt="" class="p_x2cloud1 pageleft" ondragstart="return false;" />
            <img src="./img/x2cloud2.png" alt="" class="p_x2cloud2 pageleft" ondragstart="return false;" />
            <img src="./img/x2cloud3.png" alt="" class="p_x2cloud3 pageleft" ondragstart="return false;" />
            <img src="./img/x2wheel1.png" alt="" class="p_x2wheel1 pageleft" ondragstart="return false;" />
            <img src="./img/x2wheel2.png" alt="" class="p_x2wheel2 pageleft" ondragstart="return false;" />
            <img src="./img/x2computer.png" alt="" class="p_x2computer pagebot" ondragstart="return false;" />
        </div>
    </li>
    <li class="section page03">
        <div class="p_sfmain p_safex3">
            <img src="./img/x3title.png" alt="" class="p_x3title pagetop" ondragstart="return false;" />
            <img src="./img/x3round.png" alt="" class="p_x3round pagetop" ondragstart="return false;" />
            <img src="./img/x3man.png" alt="" class="p_x3man pagetop" ondragstart="return false;" />
            <img src="./img/x3notebook.png" alt="" class="p_x3notebook pageright" ondragstart="return false;" />
            <img src="./img/x3pencil.png" alt="" class="p_x3pencil pageright" ondragstart="return false;" />
            <img src="./img/x3frog.png" alt="" class="p_x3frog pagebot" ondragstart="return false;" />
            <img src="./img/x3bubble.png" alt="" class="p_x3bubble pageleft" ondragstart="return false;" />
            <img src="./img/x3word.png" alt="" class="p_x3word pageleft" ondragstart="return false;" />
        </div>
    </li>
    <li class="section page04">
        <div class="p_sfmain p_safex4">
            <img src="./img/x4title.png" alt="" class="p_x4title pagetop" ondragstart="return false;" />
            <img src="./img/x2frog.png" alt="" class="p_x4frog pagebot" ondragstart="return false;" />
            <img src="./img/x4bubble.png" alt="" class="p_x4bubble pageright" ondragstart="return false;" />
            <img src="./img/x4word.png" alt="" class="p_x4word pageright" ondragstart="return false;" />
            <img src="./img/x2round.png" alt="" class="p_x4round pagetop" ondragstart="return false;" />
            <img src="./img/x4computer.png" alt="" class="p_x4computer pageleft" ondragstart="return false;" />
            <img src="./img/x4bankcard.png" alt="" class="p_x4bankcard pageleft" ondragstart="return false;" />
            <img src="./img/x4coin1.png" alt="" class="p_x4coin1" ondragstart="return false;" />
            <img src="./img/x4coin2.png" alt="" class="p_x4coin2" ondragstart="return false;" />
            <img src="./img/x4coin3.png" alt="" class="p_x4coin3" ondragstart="return false;" />
            <img src="./img/x4coin4.png" alt="" class="p_x4coin4 pagecoin1" ondragstart="return false;" />
            <img src="./img/x4coin5.png" alt="" class="p_x4coin5 pagecoin2" ondragstart="return false;" />
            <img src="./img/x4coin6.png" alt="" class="p_x4coin6 pagecoin3" ondragstart="return false;" />
            <img src="./img/x4coin7.png" alt="" class="p_x4coin7 pagecoin2" ondragstart="return false;" />
            <img src="./img/x4coin6.png" alt="" class="p_x4coin8 pagecoin3" ondragstart="return false;" />
            <img src="./img/x4coin6.png" alt="" class="p_x4coin9 pagecoin4" ondragstart="return false;" />
            <img src="./img/x4coin6.png" alt="" class="p_x4coina pagecoin5" ondragstart="return false;" />
        </div>
    </li>
    <li class="section page05">
        <div class="p_sfmain p_safex5">
            <img src="./img/x5title.png" alt="" class="p_x5title pagetop" ondragstart="return false;" />
            <img src="./img/x5frog.png" alt="" class="p_x5frog pagebot" ondragstart="return false;" />
            <img src="./img/x5bubble.png" alt="" class="p_x5bubble pageleft" ondragstart="return false;" />
            <img src="./img/x5word.png" alt="" class="p_x5word pageleft" ondragstart="return false;" />
            <img src="./img/x5coin1.png" alt="" class="p_x5coin1" ondragstart="return false;" />
            <img src="./img/x5coin1.png" alt="" class="p_x5coin2" ondragstart="return false;" />
            <img src="./img/x5coin1.png" alt="" class="p_x5coin3" ondragstart="return false;" />
            <img src="./img/x5coin1.png" alt="" class="p_x5coin4" ondragstart="return false;" />
            <img src="./img/x5purse.png" alt="" class="p_x5purse pagetop" ondragstart="return false;" />
            <img src="./img/x5star1.png" alt="" class="p_x5star1 fadetg1" ondragstart="return false;" />
            <img src="./img/x5star2.png" alt="" class="p_x5star2 fadetg2" ondragstart="return false;" />
            <img src="./img/x5star3.png" alt="" class="p_x5star3 fadetg3" ondragstart="return false;" />
            <img src="./img/x5star4.png" alt="" class="p_x5star4 fadetg4" ondragstart="return false;" />
            <img src="./img/x5star5.png" alt="" class="p_x5star5 fadetg5" ondragstart="return false;" />
            <a href="@{front.account.LoginAndRegisterAction.registerMobile()}" class="p_xsbutton pagebot"><img src="./img/x5button.png" alt="" /></a>
        </div>
    </li>
</ul>
<ul class="p_xscontrol" id="js_control"></ul>
  </div>
</template>
<script>
import "./noviceGuide.css";
import $ from 'jquery';
import mouseWheel from "mousewheel"
export default {
  
  methods: {
    runEvent () {
      $(window).scrollTop(0);
        var box = $("#scrollPage > li"),
            tops = [];
            box.height($(window).height());
        for(var i=0; i<box.length; i++){
            tops[i] = Math.ceil(box.eq(i).offset().top);
        }
        // 自动生成控制点
        var ctr = $("<li></li>");
        for (var x = 0; x < box.length; x++) {
            ctr.clone().appendTo($('#js_control'));
        };
        $('#js_control li').eq(0).addClass('cur');
        // 鼠标滚动
        var numm = 0
        $(document).on("mousewheel",function(e,d){
            e.preventDefault();
            
            var wtop=$(window).scrollTop();

            if(d<0){
                numm++
                for(var i=0; i<box.length-1; i++){
                    if(wtop>=tops[i] && wtop<tops[i+1]){
                        if(!$("html,body").is(":animated")){
                           $("html,body").animate({scrollTop:tops[i+1]+"px"},500);
                           $('#js_control li').removeClass("cur").eq(i+1).addClass("cur");
                           box.removeClass("pageon").eq(i+1).addClass("pageon");
                       }
                    }else if(wtop>=tops[box.length-1]){
                        if(!$("html,body").is(":animated")){
                           $("html,body").animate({scrollTop:tops[box.length-1]+box.height()+"px"},500);
                       }
                    }else if(wtop<tops[0]){
                        if(!$("html,body").is(":animated")){
                           $("html,body").animate({scrollTop:tops[0]+"px"},500);
                           box.removeClass("pageon").eq(0).addClass("pageon");
                           $('#js_control li').removeClass("cur").eq(0).addClass("cur");
                       }
                    }
                }
            }else{
                for(var i=1; i<box.length; i++){
                    if(wtop<=tops[i] && wtop>tops[i-1]){
                        if(!$("html,body").is(":animated")){
                            $("html,body").animate({scrollTop:tops[i-1]+"px"},500);
                            $('#js_control li').removeClass("cur").eq(i-1).addClass("cur");
                            box.removeClass("pageon").eq(i-1).addClass("pageon");
                       }
                    }else if(wtop>tops[box.length-1]){
                        if(!$("html,body").is(":animated")){
                           $("html,body").animate({scrollTop:tops[box.length-1]+"px"},500);
                           box.removeClass("pageon").eq(box.length-1).addClass("pageon");
                       }
                    }else if(wtop<=tops[0]){
                        if(!$("html,body").is(":animated")){
                           $("html,body").animate({scrollTop:0},500);
                           $('#js_control li').removeClass("cur").eq(0).addClass("cur");
                           // box.removeClass("pageon");
                       }
                    }
                }
            }
        })
        // 右侧控制点点击
        $('#js_control li').click(function(){
            if (!$("html,body").is(":animated")) {
                var num = $(this).index();
                $(this).addClass('cur').siblings('li').removeClass('cur');
                $("html,body").animate({scrollTop:tops[num]},400);
                box.removeClass("pageon").eq(num).addClass("pageon");
            };
        })
        // 页面刷新控制点状态
        window.onload = function(){
            $("html,body").animate({scrollTop:0},1);
            $('#js_control li').removeClass('cur').eq(0).addClass('cur');
        }
        $('.s_righttop').click(function(){
            $('#js_control li').removeClass('cur').eq(0).addClass('cur');
            box.removeClass("pageon").eq(0).addClass("pageon");
        });
    }
  },
  mounted () {
    this.runEvent();
  }
}
</script>
